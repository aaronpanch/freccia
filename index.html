<!doctype html>
<html>
  <head>
    <title>freccia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Montserrat:700|Droid+Sans' rel='stylesheet' type='text/css'>
    <link href="demo.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <section>
      <h1>freccia</h1>
      <p>A simple library for tracking touch events and giving you more info about them.</p>
      <p>Try it out! Move your finger around on the shaded region below:</p>

      <div class="touch-demo">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" class="touch-demo__layer" id="drawing-layer"></svg>
        <div class="js-touch-demo touch-demo__layer"></div>
      </div>

      <h2>What's going on?</h2>
      <p>Explanation coming soon...</p>
    </section>

    <script src="vendor/snap.svg.js"></script>
    <script src="dist/freccia.js"></script>
    <script>
      var paper = Snap('#drawing-layer');
      var element = document.querySelectorAll('.js-touch-demo')[0];
      var box = element.getBoundingClientRect();

      var f = Freccia.Manager(element);
      f.on('start', function(path, point) {
        paper.clear();
        paper.circle(point.x - box.left, point.y - box.top, 1.5).attr({ fill: '#fff' });
      });

      f.on('move', function(path, point) {
        paper.circle(point.x - box.left, point.y - box.top, 1.5).attr({ fill: '#fff', opacity: '0.5' });
      });

      f.on('end', function(path, point) {
        paper.circle(point.x - box.left, point.y - box.top, 1.5).attr({ fill: '#fff', opacity: '0.5' });
        if (path.netDistance() == 0) {
          return;
        }
        var vel = path.velocity();
        var line = paper.line(path.start().x - box.left, path.start().y - box.top, path.start().x - box.left, path.start().y - box.top);
        line.attr({
          stroke: "#fff",
          strokeWidth: 3,
          markerEnd: paper.polygon(0,0,3,1.5,0,3).attr({fill: '#fff'}).marker(0,0,3,3,0.1,1.5)
        }).animate({x2: vel.x + path.start().x - box.left, y2: vel.y + path.start().y - box.top}, 100); });
      f.trace();
    </script>
  </body>
</html>
